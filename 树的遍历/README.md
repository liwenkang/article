## 树的遍历问题

### 需求:需要从子元素上拿到父元素的信息?

### 解决方案讨论:

#### 后台在给数据的时候:

1. 直接将父元素的ID(唯一标识)绑定在子元素的数据上

   ```js
   {
       name: '爸爸',
       age: 45,    
       id: 1,   
       children: [
           {
               name: '儿子',
               age: 20,
               id: 1-1,
               parentID: 1
           }
       ]    
   }
   ```

2. 将父元素的所有信息全绑定在父元素的数据上

   ```javascript
   {
       name: '爸爸',
       age: 45,    
       children: [
           {
               name: '儿子',
               age: 20,    
               parentData: {
                   name: '爸爸',
                   age: 45
               }
           }
       ]    
   }
   ```

#### 前台在处理数据的时候:

1. 可以在初始化树的时候,就把所有父元素的信息全部挂在子元素上

   ```javascript
   // 原始数据
   {
       name: '爸爸',
       age: 45,    
       children: [
           {
               name: '儿子',
               age: 20,    
           }
       ]    
   }
   
   // 处理后数据
   {
       name: '爸爸',
       age: 45,    
       children: [
           {
               name: '儿子',
               age: 20,    
               parentData: {
                   name: '爸爸',
                   age: 45
               }
           }
       ]    
   }
   ```

2. 可以在初始化树的时候,只把父元素的ID挂在子元素上

   ```javascript
   // 原始数据
   {
       name: '爸爸',
       age: 45,   
       id: 1, 
       children: [
           {
               name: '儿子',
               age: 20,
               id: 1-1,
           }
       ]    
   }
   
   // 处理后数据
   {
       name: '爸爸',
       age: 45,    
       id: 1,   
       children: [
           {
               name: '儿子',
               age: 20,
               id: 1-1,
               parentID: 1
           }
       ]    
   }
   ```

3. 按需加载,只在某个子元素需要知道自己父元素信息的时候,进行查询(既可以只查父元素id,也可以查父元素上所有信息)

### 优缺点分析

对于前端来说,能拿到准确,结构清晰,干净的数据当然是最棒了...

当然如果后台大哥表示,你丫就不能自己搞一下?(还好我司没这种后台大哥).那我们如何选择?

首先,针对小型的数据,无论是在初始树的时候做map,添加父元素信息,还是按需搜索父元素信息,问题应该都不大.

然而,一旦数据量到某个量级,初始树时做map的做法应该首先被抛弃,性能肯定扛不住.

在按需加载的条件下,只去搜索必要的信息算是不错的方案.(此处涉及到搜索算法的问题,我司后端老哥建议先拿到父元素ID,然后一个O(n)的遍历就完事了)